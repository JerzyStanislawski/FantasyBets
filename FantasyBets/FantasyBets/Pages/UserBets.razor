@page "/UserBets/{userId}"
@using FantasyBets.Data
@using FantasyBets.Services

@inject IBetsProvider BetsProvider;
@inject NavigationManager NavigationManager;
@inject IDbContextFactory<DataContext> DbContextFactory
@inject UserManager<FantasyUser> UserManager;

<PageTitle>Bets - @userName</PageTitle>

<GamesWithBets UserId="@UserId"
               IsCurrentUser="@false" 
               BetSelections="@betSelections" />

@code {

    [Parameter]
    public string UserId { get; set; }

    private IEnumerable<BetSelection>? betSelections;
    private string userName;

    protected async override Task OnInitializedAsync()
    {
        var user = await UserManager.FindByIdAsync(UserId);

        betSelections = user.BetSelections;
        userName = user.Email;
    }
}
