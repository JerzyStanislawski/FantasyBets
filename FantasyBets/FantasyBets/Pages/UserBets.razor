@page "/UserBets/{userId}"
@using FantasyBets.Components
@using FantasyBets.Data
@using FantasyBets.Extensions
@using FantasyBets.Services

@inject UserManager<FantasyUser> UserManager;

<PageTitle>Bets - @userName</PageTitle>

<GamesWithBets UserId="@UserId"
               IsCurrentUser="@false" 
               BetSelections="@betSelections" />

@code {
    [Parameter]
    public string UserId { get; set; } = null!;

    private IEnumerable<BetSelection>? betSelections;
    private string userName = null!;

    protected async override Task OnInitializedAsync()
    {
        var user = await UserManager.FindByIdAsync(UserId);

        betSelections = user.BetSelections?.Where(x => x.Game.Started());
        userName = user.Email;
    }
}
